# ZoeDepth æ·±åº¦ä¼°è®¡é›†æˆæŒ‡å—

## ğŸ¯ æ¦‚è¿°

æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•ä½¿ç”¨é›†æˆäº† **ZoeDepth** æ·±åº¦ä¼°è®¡æ¨¡å—çš„ç«¯åˆ°ç«¯èƒŒæ™¯æ›¿æ¢ç³»ç»Ÿã€‚

### å®Œæ•´æµç¨‹

```
è¾“å…¥å›¾åƒ â†’ ZoeDepthæ·±åº¦ä¼°è®¡ â†’ æ·±åº¦å¼•å¯¼é‡æŠ•å½± â†’ èƒŒæ™¯æ‰­æ›² â†’ å‰æ™¯åˆæˆ â†’ æœ€ç»ˆç»“æœ
```

---

## ğŸ“¦ ç¯å¢ƒé…ç½®

### 1. å®‰è£… Python ä¾èµ–

```bash
pip install -r requirements.txt
```

è¿™å°†å®‰è£…ï¼š
- `opencv-python` - å›¾åƒå¤„ç†
- `numpy` - æ•°å€¼è®¡ç®—
- `Pillow` - å›¾åƒè¯»å–
- `torch` - PyTorch æ·±åº¦å­¦ä¹ æ¡†æ¶
- `torchvision` - è§†è§‰å·¥å…·
- `timm` - æ¨¡å‹åº“

### 2. éªŒè¯ ZoeDepth ç›®å½•

ç¡®ä¿é¡¹ç›®ç›®å½•ä¸‹æœ‰ `ZoeDepth/` æ–‡ä»¶å¤¹ï¼Œç»“æ„å¦‚ä¸‹ï¼š

```
C:\Users\lzy\Desktop\Test\
â”œâ”€â”€ ZoeDepth/              â† å¿…éœ€
â”‚   â”œâ”€â”€ hubconf.py
â”‚   â”œâ”€â”€ zoedepth/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ depth_estimator.py      â† æ–°å¢çš„æ·±åº¦ä¼°è®¡æ¨¡å—
â”œâ”€â”€ run_with_zoedepth.py    â† æ–°å¢çš„ç«¯åˆ°ç«¯è„šæœ¬
â””â”€â”€ ...
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•1: ä½¿ç”¨æµ‹è¯•æ•°æ®ï¼ˆæ¨èæ–°æ‰‹ï¼‰

ä¸€é”®è¿è¡Œå®Œæ•´æµç¨‹ï¼ŒåŒ…å«æ·±åº¦ä¼°è®¡å’Œä¸¤ç§æ–¹æ³•å¯¹æ¯”ï¼š

```bash
python run_with_zoedepth.py
```

è¿™å°†ï¼š
1. è‡ªåŠ¨æ£€æŸ¥å¹¶ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
2. ä½¿ç”¨ ZoeDepth ä¼°è®¡èƒŒæ™¯æ·±åº¦
3. è¿è¡Œæ·±åº¦å¼•å¯¼æ–¹æ³•
4. è¿è¡Œä¸¤é˜¶æ®µå•åº”æ–¹æ³•ï¼ˆå¯¹æ¯”ï¼‰
5. ä¿å­˜æ‰€æœ‰ç»“æœåˆ° `output/` ç›®å½•

**è¾“å‡ºæ–‡ä»¶ï¼š**
- `result_depth_left.jpg` / `result_depth_right.jpg` - æ·±åº¦æ–¹æ³•æœ€ç»ˆç»“æœ
- `result_two_stage_left.jpg` / `result_two_stage_right.jpg` - å•åº”æ–¹æ³•ç»“æœ
- `estimated_depth.png` - ZoeDepth ä¼°è®¡çš„æ·±åº¦å›¾ï¼ˆ16ä½PNGï¼Œå•ä½ï¼šæ¯«ç±³ï¼‰
- `estimated_depth_visualization.jpg` - æ·±åº¦å›¾å½©è‰²å¯è§†åŒ–

---

### æ–¹æ³•2: ä½¿ç”¨è‡ªå·±çš„å›¾åƒ

#### å‡†å¤‡è¾“å…¥æ•°æ®

æŒ‰ç…§ä»¥ä¸‹ç»“æ„å‡†å¤‡ä½ çš„å›¾åƒï¼š

```
my_input/
â”œâ”€â”€ background.jpg           # è¦æ›¿æ¢çš„æ–°èƒŒæ™¯
â”œâ”€â”€ foreground_left.jpg      # å·¦ç›¸æœºæ‹æ‘„çš„å‰æ™¯
â”œâ”€â”€ foreground_right.jpg     # å³ç›¸æœºæ‹æ‘„çš„å‰æ™¯
â”œâ”€â”€ mask_left.png           # å·¦å‰æ™¯æ©ç ï¼ˆç™½è‰²=å‰æ™¯ï¼Œé»‘è‰²=èƒŒæ™¯ï¼‰
â””â”€â”€ mask_right.png          # å³å‰æ™¯æ©ç 
```

#### è¿è¡Œæ·±åº¦æ–¹æ³•

```python
from run_with_zoedepth import run_end_to_end_with_depth_estimation

run_end_to_end_with_depth_estimation(
    background_path="my_input/background.jpg",
    foreground_left_path="my_input/foreground_left.jpg",
    foreground_right_path="my_input/foreground_right.jpg",
    mask_left_path="my_input/mask_left.png",
    mask_right_path="my_input/mask_right.png",
    output_dir="my_output",
    use_depth_method=True,
    depth_params={
        'hfov_deg': 70.0,        # æ ¹æ®ä½ çš„ç›¸æœºè°ƒæ•´
        'baseline': 0.065,        # å·¦å³ç›¸æœºè·ç¦»ï¼ˆç±³ï¼‰
        'rotation_y_deg': 5.0     # ç›¸æœºæ—‹è½¬è§’åº¦
    }
)
```

---

## ğŸ”§ æ¨¡å—è¯¦è§£

### 1. `depth_estimator.py` - æ·±åº¦ä¼°è®¡æ¨¡å—

#### ZoeDepthEstimator ç±»

```python
from depth_estimator import ZoeDepthEstimator

# åˆå§‹åŒ–ä¼°è®¡å™¨
estimator = ZoeDepthEstimator(
    model_type="ZoeD_NK",  # "ZoeD_N"(å®¤å†…) / "ZoeD_K"(å®¤å¤–) / "ZoeD_NK"(é€šç”¨)
    use_local=True         # ä½¿ç”¨æœ¬åœ° ZoeDepth ç›®å½•
)

# ä¼°è®¡å•å¼ å›¾åƒçš„æ·±åº¦
image = cv2.imread("background.jpg")
depth_meters = estimator.estimate_depth(image)  # è¿”å›å•ä½ï¼šç±³

# ä¿å­˜æ·±åº¦å›¾ï¼ˆå¸¦å¯è§†åŒ–ï¼‰
estimator.estimate_and_save(
    "background.jpg",
    "output/depth.png",
    visualize=True
)
```

#### æ·±åº¦å›¾æ ¼å¼è¯´æ˜

- **è¾“å…¥**ï¼šOpenCV è¯»å–çš„ BGR å›¾åƒï¼ˆ`np.ndarray`ï¼‰
- **è¾“å‡º**ï¼šæ·±åº¦å›¾ï¼Œå•ä½æ˜¯**ç±³**ï¼ˆ`float32`ï¼‰
- **ä¿å­˜æ ¼å¼**ï¼š16ä½PNGï¼Œå•ä½æ˜¯**æ¯«ç±³**ï¼ˆä¹˜ä»¥1000ï¼‰

**è¯»å–å·²ä¿å­˜çš„æ·±åº¦å›¾ï¼š**
```python
depth_uint16 = cv2.imread("depth.png", cv2.IMREAD_ANYDEPTH)
depth_meters = depth_uint16.astype(np.float32) / 1000.0
```

---

### 2. `run_with_zoedepth.py` - ç«¯åˆ°ç«¯æµç¨‹

#### ä¸»å‡½æ•°ï¼š`run_end_to_end_with_depth_estimation`

**å‚æ•°è¯´æ˜ï¼š**

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `background_path` | str | æ–°èƒŒæ™¯å›¾è·¯å¾„ |
| `foreground_left_path` | str | å·¦ç›¸æœºå‰æ™¯å›¾ |
| `foreground_right_path` | str | å³ç›¸æœºå‰æ™¯å›¾ |
| `mask_left_path` | str | å·¦å‰æ™¯æ©ç  |
| `mask_right_path` | str | å³å‰æ™¯æ©ç  |
| `reference_left_path` | str | å·¦å‚è€ƒå›¾ï¼ˆä»…ä¸¤é˜¶æ®µæ–¹æ³•éœ€è¦ï¼‰ |
| `reference_right_path` | str | å³å‚è€ƒå›¾ï¼ˆä»…ä¸¤é˜¶æ®µæ–¹æ³•éœ€è¦ï¼‰ |
| `use_depth_method` | bool | `True`=æ·±åº¦æ–¹æ³•ï¼Œ`False`=ä¸¤é˜¶æ®µæ–¹æ³• |
| `depth_params` | dict | æ·±åº¦æ–¹æ³•å‚æ•°ï¼ˆè§ä¸‹æ–‡ï¼‰ |

**æ·±åº¦å‚æ•° `depth_params`ï¼š**

```python
depth_params = {
    'hfov_deg': 70.0,        # æ°´å¹³è§†åœºè§’ï¼ˆåº¦ï¼‰ï¼Œå…¸å‹å€¼ 60-80
    'baseline': 0.065,        # å·¦å³ç›¸æœºåŸºçº¿è·ç¦»ï¼ˆç±³ï¼‰ï¼Œå…¸å‹å€¼ 0.05-0.10
    'rotation_y_deg': 5.0     # å·¦å³ç›¸æœºå¯¹ç§°æ—‹è½¬è§’ï¼ˆåº¦ï¼‰ï¼Œå…¸å‹å€¼ 3-7
}
```

---

## ğŸ“ å‚æ•°è°ƒæ•´å»ºè®®

### å¦‚ä½•ä¼°ç®—ç›¸æœºå‚æ•°ï¼Ÿ

#### 1. æ°´å¹³è§†åœºè§’ (HFOV)

**æ–¹æ³•Aï¼šä»ç›¸æœºè§„æ ¼**
- æŸ¥çœ‹ç›¸æœº/æ‰‹æœºçš„ä¼ æ„Ÿå™¨å°ºå¯¸å’Œç„¦è·
- ä½¿ç”¨å…¬å¼ï¼š`HFOV = 2 * arctan(ä¼ æ„Ÿå™¨å®½åº¦ / (2 * ç„¦è·))`

**æ–¹æ³•Bï¼šå®é™…æµ‹é‡**
- åœ¨å·²çŸ¥å®½åº¦çš„ç‰©ä½“å‰æ‹ç…§ï¼ˆå¦‚1ç±³å®½çš„æµ·æŠ¥ï¼‰
- è®°å½•ç‰©ä½“åˆ°ç›¸æœºçš„è·ç¦»
- ä½¿ç”¨å‡ ä½•å…³ç³»åç®—è§†åœºè§’

**å¸¸è§è®¾å¤‡å‚è€ƒå€¼ï¼š**
- æ‰‹æœºåç½®æ‘„åƒå¤´ï¼š65-75Â°
- è¿åŠ¨ç›¸æœºï¼ˆGoProï¼‰ï¼š120-170Â°
- å•åç›¸æœºï¼ˆ50mmé•œå¤´ï¼‰ï¼š40-50Â°
- ç½‘ç»œæ‘„åƒå¤´ï¼š60-90Â°

#### 2. åŸºçº¿è·ç¦» (Baseline)

- **ç‰©ç†æµ‹é‡**ï¼šç”¨å°ºå­ç›´æ¥æµ‹é‡ä¸¤ä¸ªç›¸æœºé•œå¤´ä¸­å¿ƒçš„è·ç¦»
- **å…¸å‹å€¼**ï¼š
  - åŒç›®ç›¸æœºï¼š6-10cm
  - æ‰‹æœºåŒæ‘„ï¼š1-3cm
  - VRå¤´æ˜¾ï¼š6-7cmï¼ˆæ¨¡æ‹Ÿäººçœ¼é—´è·ï¼‰

#### 3. æ—‹è½¬è§’åº¦ (Rotation)

- **å¯¹ç§°å¸ƒç½®**ï¼šå¦‚æœå·¦å³ç›¸æœºå¯¹ç§°å‘å†…æ—‹è½¬ï¼Œä½¿ç”¨å®é™…æ—‹è½¬è§’åº¦
- **å¹³è¡Œå¸ƒç½®**ï¼šè®¾ä¸º 0Â°
- **å¸¸è§é…ç½®**ï¼š3-7Â°ï¼ˆè½»å¾®å†…æ—‹ï¼Œæ¨¡æ‹Ÿä¼šèšï¼‰

**å®éªŒè°ƒæ•´ï¼š**
1. å…ˆä½¿ç”¨é»˜è®¤å€¼è¿è¡Œ
2. è§‚å¯Ÿ `warped_bg_*.jpg` çš„èƒŒæ™¯æ‰­æ›²æ•ˆæœ
3. å¦‚æœå·¦å³è§†å·®è¿‡å¤§/è¿‡å°ï¼Œè°ƒæ•´ `baseline` å’Œ `rotation_y_deg`

---

## ğŸ¨ æ·±åº¦å¯è§†åŒ–è¯´æ˜

ç”Ÿæˆçš„ `estimated_depth_visualization.jpg` ä½¿ç”¨é¢œè‰²ç¼–ç æ·±åº¦ï¼š

- **çº¢è‰²/é»„è‰²** = è¿‘å¤„ç‰©ä½“ï¼ˆ2-5ç±³ï¼‰
- **ç»¿è‰²** = ä¸­è·ç¦»ï¼ˆ5-10ç±³ï¼‰
- **è“è‰²/ç´«è‰²** = è¿œå¤„ç‰©ä½“ï¼ˆ10-20ç±³+ï¼‰

---

## ğŸ” å¸¸è§é—®é¢˜

### Q1: æç¤º "ZoeDepth æ¨¡å‹æœªæˆåŠŸåŠ è½½"ï¼Ÿ

**è§£å†³æ–¹æ³•ï¼š**
1. ç¡®ä¿ `ZoeDepth/` ç›®å½•å­˜åœ¨ä¸”åŒ…å« `hubconf.py`
2. å®‰è£…ä¾èµ–ï¼š`pip install torch torchvision timm`
3. æ£€æŸ¥æ˜¯å¦æœ‰ GPUï¼ˆå¯é€‰ï¼‰ï¼š
   ```python
   import torch
   print(torch.cuda.is_available())  # True è¡¨ç¤ºæœ‰ GPU
   ```

### Q2: æ·±åº¦ä¼°è®¡å¾ˆæ…¢ï¼Ÿ

**ä¼˜åŒ–æ–¹æ³•ï¼š**
- **ä½¿ç”¨ GPU**ï¼šç¡®ä¿å®‰è£…äº† CUDA ç‰ˆæœ¬çš„ PyTorch
  ```bash
  pip install torch torchvision --index-url https://download.pytorch.org/whl/cu118
  ```
- **é™ä½è¾“å…¥åˆ†è¾¨ç‡**ï¼šæ·±åº¦ä¼°è®¡å‰å…ˆç¼©æ”¾å›¾åƒ
  ```python
  small_img = cv2.resize(image, (960, 540))
  depth = estimator.estimate_depth(small_img)
  depth = cv2.resize(depth, (1920, 1080))
  ```

### Q3: æ·±åº¦æ–¹æ³•æ•ˆæœä¸å¦‚ä¸¤é˜¶æ®µæ–¹æ³•ï¼Ÿ

**å¯èƒ½åŸå› ï¼š**
- **èƒŒæ™¯æ˜¯å¹³é¢**ï¼šå¦‚æœèƒŒæ™¯æ˜¯å¹³é¢å¢™çº¸ï¼Œæ·±åº¦ä¿¡æ¯æ²¡æœ‰ä¼˜åŠ¿ï¼Œå»ºè®®ç”¨ä¸¤é˜¶æ®µæ–¹æ³•
- **æ·±åº¦ä¼°è®¡è¯¯å·®**ï¼šZoeDepth å¯¹æŸäº›åœºæ™¯ï¼ˆå¦‚çº¯è‰²èƒŒæ™¯ï¼‰ä¼°è®¡ä¸å‡†ç¡®
- **å‚æ•°ä¸åŒ¹é…**ï¼šè°ƒæ•´ `baseline` å’Œ `rotation_y_deg` å‚æ•°

**å»ºè®®ï¼š**
- å¯¹äº**å¤æ‚3DèƒŒæ™¯**ï¼ˆé£æ™¯ã€å»ºç­‘ï¼‰ï¼Œä¼˜å…ˆä½¿ç”¨æ·±åº¦æ–¹æ³•
- å¯¹äº**ç®€å•å¹³é¢èƒŒæ™¯**ï¼ˆçº¯è‰²ã€æµ·æŠ¥ï¼‰ï¼Œä½¿ç”¨ä¸¤é˜¶æ®µæ–¹æ³•

### Q4: å¦‚ä½•åˆ‡æ¢ ZoeDepth æ¨¡å‹ï¼Ÿ

```python
# å®¤å†…åœºæ™¯ï¼ˆNYUæ•°æ®é›†è®­ç»ƒï¼‰
estimator = ZoeDepthEstimator(model_type="ZoeD_N")

# å®¤å¤–é©¾é©¶åœºæ™¯ï¼ˆKITTIæ•°æ®é›†è®­ç»ƒï¼‰
estimator = ZoeDepthEstimator(model_type="ZoeD_K")

# é€šç”¨åœºæ™¯ï¼ˆæ··åˆæ•°æ®é›†è®­ç»ƒï¼Œæ¨èï¼‰
estimator = ZoeDepthEstimator(model_type="ZoeD_NK")
```

### Q5: èƒ½å¦ä½¿ç”¨å…¶ä»–æ·±åº¦ä¼°è®¡æ¨¡å‹ï¼Ÿ

å¯ä»¥ï¼åœ¨ `depth_estimator.py` ä¸­å·²é¢„ç•™ `DepthAnythingEstimator` ç±»æ¡†æ¶ã€‚

**é›†æˆæ­¥éª¤ï¼š**
1. å®ç° `estimate_depth` æ–¹æ³•
2. ç¡®ä¿è¾“å‡ºå•ä½æ˜¯**ç±³**ï¼ˆä¸æ˜¯å½’ä¸€åŒ–å€¼ï¼‰
3. åœ¨ `run_with_zoedepth.py` ä¸­æ›¿æ¢ `ZoeDepthEstimator`

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

æµ‹è¯•ç¯å¢ƒï¼šRTX 3060 GPUï¼Œ1920Ã—1080 å›¾åƒ

| æ­¥éª¤ | è€—æ—¶ | å¤‡æ³¨ |
|------|------|------|
| ZoeDepth æ·±åº¦ä¼°è®¡ | ~2ç§’ | GPUåŠ é€Ÿ |
| æ·±åº¦å¼•å¯¼é‡æŠ•å½± | ~0.5ç§’ | CPU |
| å‰æ™¯èƒŒæ™¯åˆæˆ | ~0.1ç§’ | CPU |
| **æ€»è®¡** | **~2.6ç§’** | å•å¯¹ç«‹ä½“å›¾ |

CPU Onlyï¼ˆæ— GPUï¼‰ï¼šçº¦10-15ç§’

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. è¾“å…¥æ•°æ®è´¨é‡

âœ… **æ¨èï¼š**
- èƒŒæ™¯å›¾åˆ†è¾¨ç‡ â‰¥ 1920Ã—1080
- å‰æ™¯æ©ç è¾¹ç¼˜æ¸…æ™°ï¼ˆä½¿ç”¨ä¸“ä¸šæŠ å›¾å·¥å…·ï¼‰
- å·¦å³è§†è§’å·®å¼‚é€‚ä¸­ï¼ˆè§†å·®ä¸è¶…è¿‡å›¾åƒå®½åº¦çš„10%ï¼‰

âŒ **é¿å…ï¼š**
- è¿‡åº¦å‹ç¼©çš„JPEGï¼ˆå¯¼è‡´æ·±åº¦ä¼°è®¡å¤±çœŸï¼‰
- æ©ç è¾¹ç¼˜é”¯é½¿ä¸¥é‡
- å·¦å³è§†è§’å®Œå…¨ç›¸åŒï¼ˆæ— æ³•å­¦ä¹ å‡ ä½•å…³ç³»ï¼‰

### 2. è°ƒè¯•æµç¨‹

1. **å…ˆè¿è¡Œæµ‹è¯•æ•°æ®**ï¼Œç¡®è®¤ç¯å¢ƒæ­£å¸¸
2. **æ£€æŸ¥æ·±åº¦å¯è§†åŒ–**ï¼Œç¡®è®¤æ·±åº¦åˆç†
3. **æŸ¥çœ‹ä»…èƒŒæ™¯æ‰­æ›²**ï¼ˆ`warped_bg_*.jpg`ï¼‰ï¼Œç¡®è®¤å‡ ä½•æ­£ç¡®
4. **è°ƒæ•´å‚æ•°**ï¼Œä¼˜åŒ–æœ€ç»ˆåˆæˆæ•ˆæœ

### 3. æ‰¹é‡å¤„ç†

å¤„ç†å¤šå¼ å›¾åƒæ—¶ï¼Œå¤ç”¨æ¨¡å‹å®ä¾‹ï¼š

```python
estimator = ZoeDepthEstimator()  # åªåŠ è½½ä¸€æ¬¡æ¨¡å‹

for img_path in image_list:
    depth = estimator.estimate_depth(cv2.imread(img_path))
    # ... åç»­å¤„ç†
```

---

## ğŸ“š æŠ€æœ¯ç»†èŠ‚

### ZoeDepth æ¨¡å‹ç‰¹ç‚¹

- **åº¦é‡æ·±åº¦**ï¼šç›´æ¥è¾“å‡ºå®é™…è·ç¦»ï¼ˆç±³ï¼‰ï¼Œæ— éœ€å°ºåº¦æ¢å¤
- **é›¶æ ·æœ¬æ³›åŒ–**ï¼šæ— éœ€é’ˆå¯¹ç‰¹å®šåœºæ™¯å¾®è°ƒ
- **å¤šæ•°æ®é›†è®­ç»ƒ**ï¼šç»“åˆ NYU Depthï¼ˆå®¤å†…ï¼‰+ KITTIï¼ˆå®¤å¤–ï¼‰

### ä¸ MiDaS/Depth Anything å¯¹æ¯”

| æ¨¡å‹ | è¾“å‡ºç±»å‹ | é€‚ç”¨åœºæ™¯ | ä¼˜åŠ¿ |
|------|---------|---------|------|
| **ZoeDepth** | åº¦é‡æ·±åº¦ï¼ˆç±³ï¼‰ | é€šç”¨ | ç›´æ¥å¯ç”¨ï¼Œæ— éœ€å°ºåº¦è½¬æ¢ |
| MiDaS | ç›¸å¯¹æ·±åº¦ | é€šç”¨ | å¿«é€Ÿï¼Œä½†éœ€å°ºåº¦æ¢å¤ |
| Depth Anything | ç›¸å¯¹æ·±åº¦ | é€šç”¨ | æœ€æ–°SOTAï¼Œæ³›åŒ–èƒ½åŠ›å¼º |

**æœ¬é¡¹ç›®é€‰æ‹© ZoeDepth çš„åŸå› ï¼š**
æ·±åº¦é‡æŠ•å½±éœ€è¦å®é™…è·ç¦»ï¼ˆç±³ï¼‰ï¼ŒZoeDepth ç›´æ¥è¾“å‡ºåº¦é‡æ·±åº¦ï¼Œæ— éœ€é¢å¤–å¤„ç†ã€‚

---

## ğŸ› ï¸ æ‰©å±•å¼€å‘

### æ·»åŠ è‡ªå®šä¹‰æ·±åº¦æ¨¡å‹

1. åœ¨ `depth_estimator.py` ä¸­åˆ›å»ºæ–°ç±»ï¼š
   ```python
   class MyDepthEstimator:
       def estimate_depth(self, image_bgr: np.ndarray) -> np.ndarray:
           # ä½ çš„å®ç°
           # è¿”å›å€¼å¿…é¡»æ˜¯ float32ï¼Œå•ä½ï¼šç±³
           pass
   ```

2. åœ¨ `run_with_zoedepth.py` ä¸­æ›¿æ¢ï¼š
   ```python
   from depth_estimator import MyDepthEstimator
   estimator = MyDepthEstimator()
   ```

### æ·»åŠ æ·±åº¦åå¤„ç†

åœ¨ä¼°è®¡æ·±åº¦åï¼Œå¯ä»¥æ·»åŠ æ»¤æ³¢/ä¼˜åŒ–ï¼š

```python
depth = estimator.estimate_depth(image)

# ä¸­å€¼æ»¤æ³¢å»é™¤å™ªå£°
depth = cv2.medianBlur(depth.astype(np.float32), 5)

# åŒè¾¹æ»¤æ³¢ä¿ç•™è¾¹ç¼˜
depth = cv2.bilateralFilter(depth, 9, 75, 75)
```

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- **è¾“å…¥æ•°æ®å‡†å¤‡**ï¼šè§ `INPUT_DATA_GUIDE.md`
- **ä¸¤é˜¶æ®µæ–¹æ³•è¯¦è§£**ï¼šè§ `TWO_STAGE_GUIDE.md`
- **åŸå§‹æ–¹æ¡ˆè¯´æ˜**ï¼šè§ `background_warping.md`
- **åŸºç¡€ä½¿ç”¨ç¤ºä¾‹**ï¼šè§ `README.md`

---

## ğŸ“ æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼ŸæŒ‰ä»¥ä¸‹é¡ºåºæ’æŸ¥ï¼š

1. âœ… è¿è¡Œ `python depth_estimator.py` æµ‹è¯•æ¨¡å‹åŠ è½½
2. âœ… è¿è¡Œ `python run_with_zoedepth.py` ä½¿ç”¨æµ‹è¯•æ•°æ®
3. âœ… æ£€æŸ¥ `output/` ç›®å½•çš„ä¸­é—´ç»“æœ
4. âœ… æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯

---

**ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸš€**

